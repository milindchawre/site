
<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">

    <head>

        
        <meta charset="UTF-8" />

        
        <meta name="viewport" content="width=device-width, initial-scale=1"/>

                
        <title> 
             ttl.sh : Your Anonymous and Ephemeral Docker Image Registry  
        </title>
        
        
            <link href="https://milindchawre.github.io/site/index.xml" rel="alternate" type="application/rss+xml" title="Milind&#39;s Blog" />
        

        
        <link rel="stylesheet" href="/site/css/style.css"/>

        
        
            <link rel='stylesheet' href='https://milindchawre.github.io/site/css/custom.css'>
        
        
    </head>

    <body>



<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="https://milindchawre.github.io/site/">
          <h1 id="nav-heading" class="title is-4">Milind&#39;s Blog</h1>
        </a>
      </div>
      <div class="nav-right">
        
        
        <nav id="nav-items" class="nav-item level is-mobile">
          <a class="level-item" aria-label="about" href='/site/about'
           rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="8"></line>
    
  </svg>
</i>
            </span>
          </a>
          <a class="level-item" aria-label="resume" href='https://milindchawre.github.io'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M22.125 2.25H1.875A1.127 1.127 0 0 0 .75 3.375v17.25a1.127 1.127 0 0 0 1.125 1.125H6v-2.757c0-.351.192-.656.477-.817l.005-.002l4.311-2.396l-1.419-3.546V9.376a2.625 2.625 0 1 1 5.25 0v2.856l-1.419 3.546l4.312 2.396c.29.163.482.469.482.819v2.757h4.125a1.127 1.127 0 0 0 1.125-1.125V3.375a1.127 1.127 0 0 0-1.125-1.125zm-.375 18H19.5v-1.257c0-.911-.5-1.706-1.241-2.124l-.012-.006l-3.157-1.755l1.035-2.588V9.376a4.125 4.125 0 0 0-8.25 0v3.144l1.035 2.588l-3.157 1.755a2.441 2.441 0 0 0-1.253 2.13v1.257H2.25V3.75h19.5z" fill="black"/>
    
  </svg>
</i>
            </span>
          </a>
          <a class="level-item" aria-label="email" href='mailto:milindchawre@outlook.com'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg>
</i>
            </span>
          </a>
          <a class="level-item" aria-label="github" href='https://github.com/milindchawre'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg>
</i>
            </span>
          </a>
          <a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/milind-chawre'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg>
</i>
            </span>
          </a>
          <a class="level-item" aria-label="stackoverflow" href='https://stackoverflow.com/users/6790948/mchawre?tab=profile'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189l.451-2.07l-10.478-2.187l-.453 2.068zm1.359-5.056l9.705 4.53l.903-1.95l-9.706-4.53l-.902 1.936v.014zm2.715-4.785l8.217 6.855l1.359-1.62l-8.216-6.853l-1.35 1.617l-.01.001zM15.751 0l-1.746 1.294l6.405 8.604l1.746-1.294L15.749 0h.002z" fill="white"/>
    
  </svg>
</i>
            </span>
          </a>
          <a class="level-item" aria-label="twitter" href='https://twitter.com/@milindchawre'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg>
</i>
            </span>
          </a>
          <a class="level-item" aria-label="facebook" href='https://facebook.com/milind.chawre'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
    
  </svg>
</i>
            </span>
          </a>
          <a class="level-item" aria-label="rss" href='/site/index.xml'
           target='_blank'  rel='noopener'>
            <span class="icon">
              <i class>

<svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
    
  </svg>
</i>
            </span>
          </a></nav>
        
      
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
</section>

<section class="section">
    
    <div class="container">
    
        
            
<div class="subtitle tags is-6 is-pulled-right">
    
        
<a class="subtitle is-6" href="/site/tags/docker/">#docker</a>



  
  | <a class="subtitle is-6" href="/site/tags/registry/">#registry</a>
  
  | <a class="subtitle is-6" href="/site/tags/ci-cd/">#ci-cd</a>
  


    
</div>



<h2 class="subtitle is-6">
    
    
        February 20, 2021 | 16:49
    
</h2>



<h1 class="title">ttl.sh : Your Anonymous and Ephemeral Docker Image Registry</h1>

<div class="content">

    
    <p><em>This blog was originally featured as a <a href="https://www.civo.com/learn/ttl-sh-your-anonymous-and-ephemeral-docker-image-registry">guide</a> in civo cloud community.</em></p>
<table>
<thead>
<tr>
<th align="center"><img src="https://github.com/milindchawre/civo-k8s/raw/master/blog/ttl-sh/images/ttl-sh.png" alt="ttl-sh"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><em>ttl.sh</em></td>
</tr>
</tbody>
</table>
<p><a href="https://ttl.sh/">ttl.sh</a> is free to use, open source, anonymous and ephemeral docker image registry. It is developed by <a href="https://www.replicated.com/">replicated</a>. This guide looks at what an ephemeral and anonymous registry is, why you would want to use one, how to utilize ttl.sh, and some of its features.</p>
<h3 id="why-we-need-an-ephemeral-and-anonymous-registry">Why we need an ephemeral and anonymous registry</h3>
<h4 id="--management-overhead">- Management Overhead</h4>
<p>Docker registries are commonly used to store container images. While you can host your own image registry, doing so presents different maintenance challenges, like:</p>
<ul>
<li>
<p>Managing the infrastructure and bearing its cost</p>
</li>
<li>
<p>Configuring proper authentication mechanisms to access registry</p>
</li>
<li>
<p>Availability - keeping the registry always up</p>
</li>
<li>
<p>Setting up an image cleanup policy to prevent running out of space</p>
</li>
<li>
<p>The operational part of running the infrastructure, and so on.</p>
</li>
</ul>
<p>Even a managed docker registry present some of these challenges.</p>
<h4 id="--authentication">- Authentication</h4>
<p>A typical Continuous Integration (CI) workflow will build an image, push the image into a pre-defined registry, and the subsequent steps will perform tests on that image (either sequentially or in parallell). So one steps will build and push the image, while other subsequent distributed steps will pull that image. The most common-seen issue here is that the registries require authentication to push and pull images. As the official ttl.sh site says: &ldquo;A CI workflow can either bake its own credentials and share them with build workers, or build workers can bring their own registry credentials. The first is insecure, the second creates friction for new contributors&rdquo;.</p>
<p>So, Overall there are <a href="https://dzone.com/articles/docker-registries-and-the-five-problems-you-encoun">different challenges in maintaining a docker registry</a>, some of which <a href="https://ttl.sh/">ttl.sh</a> tries to solve by making an ephemeral and anonymous registry available. Let&rsquo;s look at what sets it apart from some other registries.</p>
<h3 id="features-of-ttlsh">Features of ttl.sh</h3>
<ul>
<li>No login is required, lowering the barrier to access.</li>
<li>You can anonymously push and pull images.</li>
<li>Images are ephmeral and get deleted after a pre-defined time limit. The default limit is 1 hour, while the maximum is 24 hours. Valid time tags are in the format <code>:5m, :100s, :3h, :1d</code>. This means the images get cleaned up automatically.</li>
<li>Image pulls are fast, deployed behind Cloudfare for rapid access across the globe, helping with the availability and operations challenges mentioned above.</li>
</ul>
<h3 id="how-to-use-ttlsh">How to use ttl.sh</h3>
<ul>
<li>First, tag your image with ttl.sh, a UUID, &amp; time limit (i.e. <code>:2h,:60s,:30m</code>):</li>
</ul>
<pre><code>$ IMAGE_NAME=$(uuidgen)                              # generates UUID like &quot;f4e58dc4-375d-4c9e-9435-8ec0eac51c19&quot;
$ docker build -t ttl.sh/${IMAGE_NAME}:1h .          # generates full image path like ttl.sh/f4e58dc4-375d-4c9e-9435-8ec0eac51c19:1h
</code></pre><p><em><strong>Note:</strong> You don&rsquo;t necessarily need to use an UUID for the image name; it can be anything. But since anyone can anonymously pull your image, its better to stick with UUID. We used <code>uuidgen</code> utility to generate the UUID. Your OS may have a different tool to generate them.</em></p>
<ul>
<li>Then, push your image:</li>
</ul>
<pre><code>$ docker push ttl.sh/${IMAGE_NAME}:1h
.............................................................................
 image ttl.sh/f4e58dc4-375d-4c9e-9435-8ec0eac51c19:1h is available for 1 hour
</code></pre><ul>
<li>Now, you will be able to pull your image (before it expires):</li>
</ul>
<pre><code>$ docker pull ttl.sh/${IMAGE_NAME}:1h
</code></pre><h3 id="what-can-i-use-ttlsh-for">What can I use ttl.sh for?</h3>
<p>ttl.sh can host your container images, so there are endless possibilities where you can use it, may it be. It could be:</p>
<ul>
<li>
<p>in your personal projects</p>
</li>
<li>
<p>non-proprietary projects</p>
</li>
<li>
<p>in your CI workflow (where build artifacts are short lived)</p>
</li>
<li>
<p>in any open source project (especially in pull request build and validation)</p>
</li>
</ul>
<p><em><strong>Note:</strong> Images hosted on ttl.sh are publicly available out there. Anyone with the right image name can pull and use it. This is why we used the UUID in the image name. It provides some sort of secrecy.</em></p>
<p>As an example, for a personal project, you could make changes to the code and have a CI/CD project build a container image based on the changes. This can automatically be pushed to ttl.sh and a <a href="https://www.civo.com/learn/gitops-on-civo-gimlet-part-one">Kubernetes cluster can pull this version to a namespace</a>, allowing you to immediately test the changes &ldquo;live&rdquo;.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Given the challenges of running a Docker image registry yourself, and the limitations placed by some registries on users, ttl.sh is a welcome tool on the landscape. You should always be conscious that while it only stores images for a pre-defined time and a maximum time of 1 day, they are available for anyone to pull if they know the image name. For this reason, you should only host non-private images on such a host.</p>
<p>For more information, check out the <a href="https://github.com/replicatedhq/ttl.sh">ttl.sh project on GitHub</a>.</p>
<p>If you found this guide useful, let me know on Twitter at <a href="https://twitter.com/milindchawre">@milindchawre</a> or you can connect with me on <a href="https://www.linkedin.com/in/milind-chawre">Linkedin</a>.</p>


    
    
        <div class="related">

</div>
    

</div>


        

    </div>

</section>



<section class="section">
  <div class="container has-text-centered">
    <p>© 2020</p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/pavel-pi/kiss-em">Kiss'Em</a>.</p>
    
  </div>
</section>

</body>
</html>

